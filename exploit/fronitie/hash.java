import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class hash {    
    static byte[] readFile(String inputFileName) {
        File file = new File(inputFileName);
        byte[] result = new byte[(int) file.length()];
        int totalBytesRead = 0;
        try {
            InputStream input = new BufferedInputStream(new FileInputStream(file));
            while (totalBytesRead < result.length) {
                int bytesRemaining = result.length - totalBytesRead;
                int bytesRead = input.read(result, totalBytesRead, bytesRemaining);
                if (bytesRead > 0) {
                    totalBytesRead += bytesRead;
                }
            }
            input.close();
        } catch (Exception e) {
            System.out.println(e);
        }
        return result;
    }

    public static byte[] getHash(byte[] payload) {
        MessageDigest digest = null;
        try {
            digest = MessageDigest.getInstance("SHA-256");
        } catch (NoSuchAlgorithmException e1) {
            e1.printStackTrace();
        }
        digest.reset();
        return digest.digest(payload);
    }

    static String bin2hex(byte[] data) {
        return String.format("%0" + (data.length * 2) + 'x', new BigInteger(1, data));
    }
            
    public static void main(String[] args) throws IOException{
        byte[] payload = readFile("D:\\Projects\\AndroidStudioProjects\\example15\\app\\src\\main\\res\\raw\\fortnite.dex");
        String actualHash = bin2hex(getHash(payload));
        System.out.println(actualHash);
        File myObj = new File("sign.dat");
        if (myObj.createNewFile()) {
            System.out.println("File created: " + myObj.getName());
        } else {
            System.out.println("File already exists.");
        }
        FileWriter myWriter = new FileWriter("D:\\Projects\\AndroidStudioProjects\\example15\\app\\src\\main\\res\\raw\\sign.dat");
        myWriter.write(actualHash);
        myWriter.close();
        System.out.println("Successfully wrote to the file.");
        test();

    }

    public static void test() throws FileNotFoundException {
        InputStream in = new FileInputStream("test2.txt");
        FileOutputStream out = null;
        try {
            out = new FileOutputStream("test.txt");
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
        }
        byte[] buff = new byte[1024];
        int read = 0;

        try {
            while (true) {
                try {
                    if (!((read = in.read(buff)) > 0)) break;
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
                try {
                    out.write(buff, 0, read);
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        } finally {
            try {
                in.close();
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
            try {
                out.close();
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }
}